<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>js44d documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	    <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">js44d documentation</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="../index.html">js44d documentation</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../index.html"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a 
                                        
                                         href="../overview.html" 
                                         href="../overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                                <li class="link">
                                  <a href="../index.html" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                        <a href="../license.html"
                                    >
                                        <span class="fa fa-file-text-o"></span>LICENSE
                                    </a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../modules.html" >
                            <div class="menu-toggler linked" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            >
                                <span class="fa fa-archive"></span>
                                <span class="link-name">Modules</span>
                                <span class="fa fa-angle-down"></span>
                            </div>
                        </a>
                        <ul class="links collapse "
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="../modules/FourDModule.html" >FourDModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/JS44DModule.html" >JS44DModule</a>
                                </li>
                                <li class="link">
                                    <a href="../modules/ModalModule.html" >ModalModule</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-components-links"
                            >
                            <span class="fa fa-cogs"></span>
                            <span>Components</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-components-links"
                            >
                                <li class="link">
                                    <a href="../components/AdvancedQueryComponent.html" >AdvancedQueryComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../components/DataGrid.html" >DataGrid</a>
                                </li>
                                <li class="link">
                                    <a href="../components/FourDDropDown.html" >FourDDropDown</a>
                                </li>
                                <li class="link">
                                    <a href="../components/ListSelectorDialog.html" >ListSelectorDialog</a>
                                </li>
                                <li class="link">
                                    <a href="../components/LoginCmp.html" >LoginCmp</a>
                                </li>
                                <li class="link">
                                    <a href="../components/OKOnlyModal.html" >OKOnlyModal</a>
                                </li>
                                <li class="link">
                                    <a href="../components/QueryBand.html" >QueryBand</a>
                                </li>
                                <li class="link">
                                    <a href="../components/QuickFindInput.html" >QuickFindInput</a>
                                </li>
                                <li class="link">
                                    <a href="../components/RecordEditWindow.html" >RecordEditWindow</a>
                                </li>
                                <li class="link">
                                    <a href="../components/RecordList.html" >RecordList</a>
                                </li>
                                <li class="link">
                                    <a href="../components/Tab.html" >Tab</a>
                                </li>
                                <li class="link">
                                    <a href="../components/Tabs.html" >Tabs</a>
                                </li>
                                <li class="link">
                                    <a href="../components/WebAppContainer.html" >WebAppContainer</a>
                                </li>
                                <li class="link">
                                    <a href="../components/YesNoModal.html" >YesNoModal</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-directives-links"
                            >
                            <span class="fa fa-code"></span>
                            <span>Directives</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-directives-links"
                            >
                                <li class="link">
                                    <a href="../directives/CustomButtonBarDirective.html" >CustomButtonBarDirective</a>
                                </li>
                                <li class="link">
                                    <a href="../directives/QueryBandDirective.html" >QueryBandDirective</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-classes-links"
                            >
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="../classes/Base64.html" >Base64</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Deferred.html" >Deferred</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/FourDQuery.html" >FourDQuery</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/ICustomModal.html" >ICustomModal</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/ICustomModalComponent.html" >ICustomModalComponent</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/MD5.html" >MD5</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/OKOnlyContent.html" >OKOnlyContent</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/Utf8.html" >Utf8</a>
                                </li>
                                <li class="link">
                                    <a href="../classes/YesNoModalContent.html" >YesNoModalContent</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-injectables-links"
                            >
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="../injectables/FourDCollection.html" >FourDCollection</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/FourDInterface.html" >FourDInterface</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/FourDModel.html" >FourDModel</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/Modal.html" >Modal</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ModalConfig.html" >ModalConfig</a>
                                </li>
                                <li class="link">
                                    <a href="../injectables/ModalDialogInstance.html" >ModalDialogInstance</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-interfaces-links"
                            >
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="../interfaces/IFieldDescription.html"  data-type="entity-link" class="active" >IFieldDescription</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-pipes-links"
                            >
                            <span class="fa fa-plus"></span>
                            <span>Pipes</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-pipes-links"
                            >
                                <li class="link">
                                    <a href="../pipes/Base64ImageRef.html" >Base64ImageRef</a>
                                </li>
                                <li class="link">
                                    <a href="../pipes/FourDDateToString.html" >FourDDateToString</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-miscellaneous-links"
                            >
                            <span class="fa fa-cubes"></span>
                            <span>Miscellaneous</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-miscellaneous-links"
                            >
                                <li class="link">
                                  <a href="../miscellaneous/variables.html" data-type="entity-link" >Variables</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                    </li>
            
                    <li class="divider"></li>
                    <li class="copyright">
                            Documentation generated using <a href="https://compodoc.github.io/website/" target="_blank">
                                        <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                            </a>
                    </li>
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="../index.html">js44d documentation</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../index.html"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a 
                                               
                                                href="../overview.html" 
                                                href="../overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                                       <li class="link">
                                         <a href="../index.html" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                               <a href="../license.html"
                                           >
                                               <span class="fa fa-file-text-o"></span>LICENSE
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../modules.html" >
                                   <div class="menu-toggler linked" data-toggle="collapse"
                                           data-target="#modules-links"
                                   >
                                       <span class="fa fa-archive"></span>
                                       <span class="link-name">Modules</span>
                                       <span class="fa fa-angle-down"></span>
                                   </div>
                               </a>
                               <ul class="links collapse "
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="../modules/FourDModule.html" >FourDModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/JS44DModule.html" >JS44DModule</a>
                                       </li>
                                       <li class="link">
                                           <a href="../modules/ModalModule.html" >ModalModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#components-links"
                   >
                                   <span class="fa fa-cogs"></span>
                                   <span>Components</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="components-links"
                   >
                                       <li class="link">
                                           <a href="../components/AdvancedQueryComponent.html" >AdvancedQueryComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/DataGrid.html" >DataGrid</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/FourDDropDown.html" >FourDDropDown</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/ListSelectorDialog.html" >ListSelectorDialog</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/LoginCmp.html" >LoginCmp</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/OKOnlyModal.html" >OKOnlyModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/QueryBand.html" >QueryBand</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/QuickFindInput.html" >QuickFindInput</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/RecordEditWindow.html" >RecordEditWindow</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/RecordList.html" >RecordList</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/Tab.html" >Tab</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/Tabs.html" >Tabs</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/WebAppContainer.html" >WebAppContainer</a>
                                       </li>
                                       <li class="link">
                                           <a href="../components/YesNoModal.html" >YesNoModal</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#directives-links"
                   >
                                   <span class="fa fa-code"></span>
                                   <span>Directives</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="directives-links"
                   >
                                       <li class="link">
                                           <a href="../directives/CustomButtonBarDirective.html" >CustomButtonBarDirective</a>
                                       </li>
                                       <li class="link">
                                           <a href="../directives/QueryBandDirective.html" >QueryBandDirective</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#classes-links"
                   >
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="../classes/Base64.html" >Base64</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Deferred.html" >Deferred</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/FourDQuery.html" >FourDQuery</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/ICustomModal.html" >ICustomModal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/ICustomModalComponent.html" >ICustomModalComponent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/MD5.html" >MD5</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/OKOnlyContent.html" >OKOnlyContent</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/Utf8.html" >Utf8</a>
                                       </li>
                                       <li class="link">
                                           <a href="../classes/YesNoModalContent.html" >YesNoModalContent</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#injectables-links"
                   >
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="../injectables/FourDCollection.html" >FourDCollection</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/FourDInterface.html" >FourDInterface</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/FourDModel.html" >FourDModel</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/Modal.html" >Modal</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ModalConfig.html" >ModalConfig</a>
                                       </li>
                                       <li class="link">
                                           <a href="../injectables/ModalDialogInstance.html" >ModalDialogInstance</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#interfaces-links"
                   >
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="../interfaces/IFieldDescription.html"  data-type="entity-link" class="active" >IFieldDescription</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#pipes-links"
                   >
                                   <span class="fa fa-plus"></span>
                                   <span>Pipes</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="pipes-links"
                   >
                                       <li class="link">
                                           <a href="../pipes/Base64ImageRef.html" >Base64ImageRef</a>
                                       </li>
                                       <li class="link">
                                           <a href="../pipes/FourDDateToString.html" >FourDDateToString</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#miscellaneous-links"
                   >
                                   <span class="fa fa-cubes"></span>
                                   <span>Miscellaneous</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="miscellaneous-links"
                   >
                                       <li class="link">
                                         <a href="../miscellaneous/variables.html" data-type="entity-link" >Variables</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="../coverage.html" ><span class="fa fa-tasks"></span>Documentation coverage</a>
                           </li>
                   
                           <li class="divider"></li>
                           <li class="copyright">
                                   Documentation generated using <a href="https://compodoc.github.io/website/" target="_blank">
                                               <img src="..//images/compodoc-vectorise.svg" class="img-responsive">
                                   </a>
                           </li>
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content interface">
                   <div class="content-data">










<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>IFieldDescription</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
    <li class="active">
        <a href="#info" id="info-tab" role="tab" data-toggle="tab" data-link="info">Info</a>
    </li>


    <li>
        <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/js44D/JSFourDModel.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>This is the description for each field in a Data Model</p>

            </p>


        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#className">className</a>
                                </li>
                                <li>
                                        <a href="#formula">formula</a>
                                </li>
                                <li>
                                        <a href="#indexed">indexed</a>
                                </li>
                                <li>
                                        <a href="#isrelated">isrelated</a>
                                </li>
                                <li>
                                        <a href="#joinFK">joinFK</a>
                                </li>
                                <li>
                                        <a href="#joinPK">joinPK</a>
                                </li>
                                <li>
                                        <a href="#length">length</a>
                                </li>
                                <li>
                                        <a href="#list">list</a>
                                </li>
                                <li>
                                        <a href="#longname">longname</a>
                                </li>
                                <li>
                                        <a href="#name">name</a>
                                </li>
                                <li>
                                        <a href="#readonly">readonly</a>
                                </li>
                                <li>
                                        <a href="#relatesTo">relatesTo</a>
                                </li>
                                <li>
                                        <a href="#required">required</a>
                                </li>
                                <li>
                                        <a href="#subTable">subTable</a>
                                </li>
                                <li>
                                        <a href="#type">type</a>
                                </li>
                                <li>
                                        <a href="#unique">unique</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="className"></a>
                                        <span class="name"><b>className</b><a href="#className"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>className:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="24" class="link-to-prism">src/js44D/JSFourDModel.ts:24</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>not used </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="formula"></a>
                                        <span class="name"><b>formula</b><a href="#formula"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>formula:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="20" class="link-to-prism">src/js44D/JSFourDModel.ts:20</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>if field is a calculated value, this is a 4D expresstion that returns the field contents </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="indexed"></a>
                                        <span class="name"><b>indexed</b><a href="#indexed"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>indexed:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/js44D/JSFourDModel.ts:40</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>indicates that the field is indexed on 4D side </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="isrelated"></a>
                                        <span class="name"><b>isrelated</b><a href="#isrelated"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>isrelated:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/js44D/JSFourDModel.ts:30</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>indicates field comes from a related table </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="joinFK"></a>
                                        <span class="name"><b>joinFK</b><a href="#joinFK"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>joinFK:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="26" class="link-to-prism">src/js44D/JSFourDModel.ts:26</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>if field is a subtable, this is the foreign key field in the main table </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="joinPK"></a>
                                        <span class="name"><b>joinPK</b><a href="#joinPK"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>joinPK:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="28" class="link-to-prism">src/js44D/JSFourDModel.ts:28</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>if field is a subtable, this is the primary key field in the related many table </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="length"></a>
                                        <span class="name"><b>length</b><a href="#length"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>length:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="44" class="link-to-prism">src/js44D/JSFourDModel.ts:44</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>if an alpha field, the field length as defined in the 4D Structure </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="list"></a>
                                        <span class="name"><b>list</b><a href="#list"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>list:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="36" class="link-to-prism">src/js44D/JSFourDModel.ts:36</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>the choice list associated to the field </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="longname"></a>
                                        <span class="name"><b>longname</b><a href="#longname"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>longname:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="16" class="link-to-prism">src/js44D/JSFourDModel.ts:16</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>the field dot long name, in the format &#39;table.field&#39;, applicable if a database field </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="name"></a>
                                        <span class="name"><b>name</b><a href="#name"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>name:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">src/js44D/JSFourDModel.ts:14</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>the field name, must be unique in the Data Model </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="readonly"></a>
                                        <span class="name"><b>readonly</b><a href="#readonly"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>readonly:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="34" class="link-to-prism">src/js44D/JSFourDModel.ts:34</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>indicates field is read only, and can&#39;t me modified </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="relatesTo"></a>
                                        <span class="name"><b>relatesTo</b><a href="#relatesTo"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>relatesTo:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="32" class="link-to-prism">src/js44D/JSFourDModel.ts:32</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>if field is a foreign key that relates to a one table, this is the related one field name in dot long format </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="required"></a>
                                        <span class="name"><b>required</b><a href="#required"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>required:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="38" class="link-to-prism">src/js44D/JSFourDModel.ts:38</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>field is a required field, cannot be empty or null </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="subTable"></a>
                                        <span class="name"><b>subTable</b><a href="#subTable"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>subTable:     <code><a href="../injectables/FourDModel.html" target="_self" >FourDModel</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="../injectables/FourDModel.html" target="_self" >FourDModel</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="22" class="link-to-prism">src/js44D/JSFourDModel.ts:22</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>if field is a subtable <i>(related many table)</i>, this is the FourDModel that represents records in that table </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="type"></a>
                                        <span class="name"><b>type</b><a href="#type"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>type:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="18" class="link-to-prism">src/js44D/JSFourDModel.ts:18</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>the field type, possible values are: string, number, Number, Date, time, boolean, blob, json, picture </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="unique"></a>
                                        <span class="name"><b>unique</b><a href="#unique"><span class="fa fa-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>unique:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>



                                    <tr>
                                        <td class="col-md-4">
                                            <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">src/js44D/JSFourDModel.ts:42</a></div>
                                        </td>
                                    </tr>

                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>field is unique </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade tab-source-code" id="c-source">
        <pre class="line-numbers"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { Base64 } from &#x27;./base64&#x27;;
import { Utf8 } from &#x27;./utf8&#x27;;


import { FourDInterface, FourDQuery } from &#x27;./JSFourDInterface&#x27;;
import { FourDCollection } from &#x27;./JSFourDCollection&#x27;;

/**
 * This is the description for each field in a Data Model
 */
export interface IFieldDescription {
    /** the field name, must be unique in the Data Model */
    name: string;
    /** the field dot long name, in the format &#x27;table.field&#x27;, applicable if a database field */
    longname: string;
    /** the field type, possible values are: string, number, Number, Date, time, boolean, blob, json, picture */
    type: string;
    /** if field is a calculated value, this is a 4D expresstion that returns the field contents */
    formula: string;
    /** if field is a subtable &lt;i&gt;(related many table)&lt;/i&gt;, this is the FourDModel that represents records in that table */
    subTable: FourDModel;
    /** not used */
    className: string;
    /** if field is a subtable, this is the foreign key field in the main table */
    joinFK: string;
    /** if field is a subtable, this is the primary key field in the related many table */
    joinPK: string;
    /** indicates field comes from a related table */
    isrelated: boolean;
    /** if field is a foreign key that relates to a one table, this is the related one field name in dot long format */
    relatesTo: string;
    /** indicates field is read only, and can&#x27;t me modified */
    readonly: boolean;
    /** the choice list associated to the field */
    list: string;
    /** field is a required field, cannot be empty or null */
    required: boolean;
    /** indicates that the field is indexed on 4D side */
    indexed: boolean;
    /** field is unique */
    unique: boolean;
    /** if an alpha field, the field length as defined in the 4D Structure */
    length: number;
}

/**
 * Individual 4D Datamodel that replicates a 4D Table&#x27;s structure and provides a CRUD API to 4D data
 */
@Injectable()
export class FourDModel {
    /** 4D&#x27;s Table name */
    public tableName &#x3D; &#x27;&#x27;;
    /** 4D&#x27;s table number */
    public tableNumber &#x3D; 0;
    /** Table&#x27;s primary key field name */
    public primaryKey_: string;

    /** record number field/attribute name, usually &#x27;_recnum&#x27; */
    public idAttribute &#x3D; &#x27;_recnum&#x27;;

    /** Table definition, array describing all fields in the Data Model and how they map to the 4D Structure */
    public fields: Array&lt;IFieldDescription&gt; &#x3D; [];

    /** callback method to be executed on 4D side before a Save operation */
    public fourdSaveCallbackMethod_: string;
    /** callback method to be executed on 4D side before a Delete operation */
    public fourdDeleteCallbackMethod_: string;

    // injected FourDInterface service
    public fourD: FourDInterface;

    // -----------------------
    // Private variables
    // -----------------------
    // current record number
    private _recnum &#x3D; -3;
    // keeps all attributes for the current model
    private _attributes: Object &#x3D; {};
    // keep a list of modified fields, to optimize Updates, only modified data is set to 4D
    private _modified: Object &#x3D; {};


    /** 
     * constructor: initialize model properties
    */
    constructor() {
        // inject FourDInterface
        this.fourD &#x3D; FourDInterface.interfaceInstance;
    }


    /**
     * Get a field value
     */
    get(field: string): any {
        return this._attributes[field];
    }

    /**
     * Set a field value, updates field modified flag
     */
    set(field: string, value: any) {
        if (this.getFieldProperties(field)) {
            if (this.getFieldDescription(field).type &#x3D;&#x3D;&#x3D; &#x27;Date&#x27;) {
                if (typeof (value) &#x3D;&#x3D;&#x3D; &#x27;string&#x27; &amp;&amp; value !&#x3D;&#x3D; &#x27;&#x27;) {
                    value &#x3D; new Date(value.replace(/-/g, &#x27;\/&#x27;));
                }
            } else if (this.getFieldDescription(field).type &#x3D;&#x3D;&#x3D; &#x27;Time&#x27;) {
                if (typeof (value) &#x3D;&#x3D;&#x3D; &#x27;string&#x27; &amp;&amp; value !&#x3D;&#x3D; &#x27;&#x27;) {
                    const hh &#x3D; +value.substr(0,2);
                    const mm &#x3D; +value.substr(3,2);
                    const ss &#x3D; +value.substr(6,2);
                    value &#x3D; new Date(0,0,0,hh,mm,ss);
                }
            }
            if (this._attributes.hasOwnProperty(field)) {
                // we are updating an attribute
                if (this._attributes[field] !&#x3D;&#x3D; value) {
                    // make sure value is indeed changing...
                    this._attributes[field] &#x3D; value;
                    this._modified[field] &#x3D; true; // mark field as modified
                }
            } else {
                // setting a new attribute
                this._attributes[field] &#x3D; value;
                this._modified[field] &#x3D; true; // mark field as modified
            }
        } else {
            this._attributes[field] &#x3D; value;
        }
    }

    /**
     * Returns the description for a given field
     * 
     * @param fieldName the field name to get properties for
     * 
     * @returns the field name properties, an IFieldDescription instance
     * 
     */
    getFieldProperties(fieldName): IFieldDescription {
        let ret: IFieldDescription &#x3D; null;
        for (const col of this.fields) {
            if (col.name &#x3D;&#x3D;&#x3D; fieldName) { ret &#x3D; col; }
        };
        return ret;
    }


    /**
     * Clears up all record fields
     */
    clearRecord() {
        for (const field of this.fields) {
            switch (field.type) {
                case &#x27;date&#x27;:
                case &#x27;Date&#x27;:
                    this[field.name] &#x3D; null;
                    break;

                case &#x27;time&#x27;:
                case &#x27;Time&#x27;:
                    this[field.name] &#x3D; null;
                    break;

                case &#x27;boolean&#x27;:
                    this[field.name] &#x3D; false;
                    break;

                case &#x27;string&#x27;:
                case &#x27;text&#x27;:
                    this[field.name] &#x3D; &#x27;&#x27;;
                    break;

                case &#x27;number&#x27;:
                    this[field.name] &#x3D; 0;
                    break;

                case &#x27;json&#x27;:
                    this[field.name] &#x3D; {};
                    break;

                case &#x27;blob&#x27;:
                case &#x27;picture&#x27;:
                    this[field.name] &#x3D; null;
                    break;

                default:
                    this[field.name] &#x3D; &#x27;&#x27;;
                    break;
            }
        };

    }

    /**
     * Serializes record data into its JSON representation as used in 4D
     *
     * @param mode can be &#x27;insert&#x27; or &#x27;update&#x27;, if mode is &#x27;update&#x27; the JSON string will contain only fields that have been modified
     * @param noAudit &#x27;no audit&#x27; flag to be sent to 4D, if &#x27;true&#x27; record audit log will be disabled 
     * 
     * @returns record contents as JSON string
     *
     */
    recordToJSON(mode: string, noAudit: boolean): string {
        const recordData: Object &#x3D; { table: this.tableName, recnum: this.recordNumber };
        // set callback methods
        if (this.fourdSaveCallbackMethod_) {
            recordData[&#x27;saveCallback&#x27;] &#x3D; this.fourdSaveCallbackMethod_; // set save callback method if set
        }

        if (noAudit) { recordData[&#x27;noAudit&#x27;] &#x3D; true; }    // disable audit log for this record

        if ((mode &#x3D;&#x3D;&#x3D; &#x27;update&#x27;) &amp;&amp; this.hasOwnProperty(&#x27;TimeStamp&#x27;)) {
            recordData[&#x27;timeStamp&#x27;] &#x3D; this[&#x27;TimeStamp&#x27;];
        } // if updating, add current record&#x27;s timestamp attribute

        recordData[&#x27;fields&#x27;] &#x3D; {}; // initialize fields propriety
        for (const field of this.fields) {
            const fieldName: string &#x3D; field.name;
            if (!this.isCalculatedField(field) &amp;&amp;
                !this.isSubtable(field) &amp;&amp;
                !this.isRelatedField(field) &amp;&amp;
                (!this.isReadOnly(field) || (mode &#x3D;&#x3D;&#x3D; &#x27;insert&#x27;)) &amp;&amp;			// May/15/09 send all non-read only fields, empty or not
                (this.isModifiedField(fieldName) || (mode &#x3D;&#x3D;&#x3D; &#x27;insert&#x27;))) { 	// Nov 18/09 send ONLY fields that have indeed been modified
                let value &#x3D; &#x27;&#x27;;
                if (((this[fieldName] !&#x3D;&#x3D; null) &amp;&amp; (this[fieldName] !&#x3D;&#x3D; undefined)) || (field.type &#x3D;&#x3D;&#x3D; &#x27;boolean&#x27;)) {
                    // send back only fields that do have some value and that belong to the table
                    // ignore calculated or related fields
                    switch (field.type) {
                        case &#x27;Date&#x27;:
                        case &#x27;date&#x27;:
                            if (typeof(this[fieldName]) &#x3D;&#x3D;&#x3D; &#x27;string&#x27;) {
                                recordData[&#x27;fields&#x27;][field.longname] &#x3D; this[fieldName]; 
                            } else {
                                const dateValue: Date &#x3D; this[fieldName];
                                value &#x3D; dateValue.getFullYear().toString();
                                if (dateValue.getMonth() &lt; 9) { value +&#x3D; &#x27;0&#x27;; }
                                value +&#x3D; (dateValue.getMonth() + 1).toString();
                                if (dateValue.getDate() &lt; 10) { value +&#x3D; &#x27;0&#x27;; }
                                value +&#x3D; dateValue.getDate().toString();
                                recordData[&#x27;fields&#x27;][field.longname] &#x3D; value;
                            }
                            break;

                        case &#x27;time&#x27;:
                        case &#x27;Time&#x27;:
                            const timeValue:Date &#x3D; this[fieldName];
                            value &#x3D; timeValue.toTimeString();
                            recordData[&#x27;fields&#x27;][field.longname] &#x3D; value;
                            break;

                        case &#x27;number&#x27;:
                        case &#x27;Number&#x27;:
                            recordData[&#x27;fields&#x27;][field.longname] &#x3D; +this[fieldName];
                            break;

                        case &#x27;boolean&#x27;:
                            recordData[&#x27;fields&#x27;][field.longname] &#x3D; (this[fieldName]) ? true : false;
                            break;

                        case &#x27;string&#x27;:
                        case &#x27;text&#x27;:
                            if (typeof (this[fieldName]) &#x3D;&#x3D;&#x3D; &#x27;string&#x27;) {
                                // if text, trim extra whitespace
                                recordData[&#x27;fields&#x27;][field.longname] &#x3D; this[fieldName].trim();
                            } else {
                                recordData[&#x27;fields&#x27;][field.longname] &#x3D; this[fieldName].toString();
                            }
                            break;

                        case &#x27;json&#x27;:
                            recordData[&#x27;fields&#x27;][field.longname] &#x3D; JSON.stringify(this[fieldName]);
                            break;

                        case &#x27;blob&#x27;:
                        case &#x27;picture&#x27;:
                            /* TODO: add support for encoding BLOB fields */
                            /*
                             if (this[fieldName] !&#x3D; null) { // encode byte array does not handle null!
                             var ba:ByteArray &#x3D; this[fieldName] as ByteArray
                             value &#x3D; &#x27;&lt;![CDATA[&#x27;+Base64.encodeByteArray(ba)+&#x27;]]&gt;&#x27;; // if blob, wrap data inside a cdata
                             }
                             */
                            recordData[&#x27;fields&#x27;][field.longname] &#x3D; this[fieldName];
                            break;

                        default:
                            recordData[&#x27;fields&#x27;][field.longname] &#x3D; this[fieldName];
                            break;
                    }
                }


            }
        };

        return JSON.stringify(recordData);

    }


    /**
     * Retrieve a record from 4D and populates the Data Model.
     *
     * @param recordNumber the record # to retrieve (optional, it defaults to the currentRecordNumber property)
     * @param recordID primary key value for the record to retrieve (optional, it defaults to the currentRecordNumber property)
     *    if specified the record is retrieved by querying on its primary key field
     * @param query query string for the record to retrieve (optional, it defaults to the currentRecordNumber property)
     * 
     * @returns returns a Promise for the database operation, whose result is the FourDModel instance
     *
     *
     */
    public getRecord(recordNumber: number &#x3D; null, recordID: string &#x3D; null, query: FourDQuery &#x3D; null): Promise&lt;FourDModel&gt; {
        if (recordNumber || this.recordNumber &gt;&#x3D; 0) {
            if (recordNumber) { this.recordNumber &#x3D; recordNumber; }

            // build request body with record number to retrieve
            const body: any &#x3D; { Username: FourDInterface.currentUser };
            body.TableName &#x3D; this.tableName;
            body.RecordNum &#x3D; this.recordNumber;
            body.VariablesList &#x3D; Base64.encode(Utf8.utf8encode(this.getColumnListJSON()));

            return new Promise((resolve, reject) &#x3D;&gt; {
                // const me &#x3D; this;
                this.fourD.call4DRESTMethod(&#x27;REST_LoadData&#x27;, body)
                    .subscribe(resultJSON &#x3D;&gt; {
                        this.clearRecord();
                        this.populateModelData(resultJSON);
                        this.clearRecordDirtyFlag();
                        resolve(this);
                    },
                        error &#x3D;&gt; {
                            console.log(&#x27;error:&#x27; + JSON.stringify(error));
                            reject(error);
                        });
            });

        } else if (recordID) { // get record using its record ID
            if (!this.primaryKey_) {
                // uh-oh no primary key field for this record, duh!
                alert(&#x27;No Primary Key specified for &#x27; + this.tableName);
            } else {
                // getting a record based on its primary key
                query &#x3D; { query: [this.tableName + &#x27;.&#x27; + this.primaryKey_ + &#x27;;&#x3D;;&#x27; + recordID] }; // build query on record id
            }

        } else if (!query) { // get record based on a query string
            return new Promise((resolve, reject) &#x3D;&gt; {
                reject(&#x27;No current record number set, and no query specified!&#x27;);
            });

        }

        const theModel: any &#x3D; this.constructor.valueOf();
        const records: FourDCollection &#x3D; new FourDCollection();
        records.model &#x3D; theModel;
        const me &#x3D; this;

        // first we send to query to 4D to get all records that match the query criteria
        // then if at lest 1 record is returned by 4D, we use it&#x27;s record number to refresh to complete record contents
        return new Promise((resolve, reject) &#x3D;&gt; {
            records.getRecords(query, [this.primaryKey_])
                .then((reclist) &#x3D;&gt; {
                    if (records.models.length &gt; 0) {
                        me.recordNumber &#x3D; records.models[0].recordNumber; // set the record number and refresh it
                        me.refresh().then((rec) &#x3D;&gt; { rec.clearRecordDirtyFlag(); resolve(me); }).catch((error) &#x3D;&gt; { reject(error); });
                    } else { reject(&#x27;recordNotFound&#x27;); }
                })
                .catch((error) &#x3D;&gt; { reject(error); });
        });


    }

    /**
     * Refresh current record, grab a fresh copy from 4D
     *
     * @returns returns a Promise for the database operation, whose result is the FourDModel instance
     *
     */
    public refresh(): Promise&lt;FourDModel&gt; {
        if (this.recordNumber &gt;&#x3D; 0) {
            return this.getRecord(this.recordNumber);
        } else {
            return new Promise((resolve, reject) &#x3D;&gt; {
                reject(&#x27;No current record number set!&#x27;);
            });
        }

    }


    /**
     * Insert a new record in the database.
     *
     * @returns returns a Promise for the database operation, whose result is the FourDModel instance. &lt;p&gt;&lt;i&gt;the primary key property is set after the record is inserted&lt;/i&gt;&lt;/p&gt;
     *
     */
    public insertRecord(): Promise&lt;string&gt; {
        const body: any &#x3D; { Username: FourDInterface.currentUser };
        body.TableName &#x3D; this.tableName;
        body.RecordNum &#x3D; this.recordNumber;
        if (this.fourdSaveCallbackMethod_) { body.CallBackMethod &#x3D; this.fourdSaveCallbackMethod_; }
        body.Action &#x3D; &#x27;add&#x27;;
        body.RecordData &#x3D; Base64.encode(Utf8.utf8encode(this.recordToJSON(&#x27;add&#x27;, false)));

        return new Promise((resolve, reject) &#x3D;&gt; {
            const me &#x3D; this;
            this.fourD.call4DRESTMethod(&#x27;REST_PostData&#x27;, body)
                .subscribe(resultJSON &#x3D;&gt; {
                    if (resultJSON.returnCode &#x3D;&#x3D;&#x3D; &#x27;OK&#x27;) {
                        // insert record went OK, retrieve calculated return code &amp; record ID
                        me.recordNumber &#x3D; resultJSON[&#x27;_recnum&#x27;];
                        if (me.primaryKey_ &amp;&amp; me.primaryKey_ !&#x3D;&#x3D; &#x27;&#x27;) { me[me.primaryKey_] &#x3D; resultJSON[&#x27;recordID&#x27;]; }
                        me.clearRecordDirtyFlag(); // clean up modified fields
                        resolve(&lt;any&gt;me);
                    } else { reject(resultJSON.returnCode); }
                },
                    error &#x3D;&gt; {
                        console.log(&#x27;error:&#x27; + JSON.stringify(error));
                        reject(error.text());
                    });
        });


    }

    /**
     * Update record in the database.
     *
     * @returns returns a Promise for the database operation, whose result is the FourDModel instance
     *
     */
    public updateRecord(): Promise&lt;string&gt; {
        if (this.recordNumber &gt;&#x3D; 0) {
            const body: any &#x3D; { Username: FourDInterface.currentUser };
            body.TableName &#x3D; this.tableName;
            body.RecordNum &#x3D; this.recordNumber;
            if (this.fourdSaveCallbackMethod_) { body.CallBackMethod &#x3D; this.fourdSaveCallbackMethod_; }
            body.Action &#x3D; &#x27;update&#x27;;
            body.RecordData &#x3D; Base64.encode(Utf8.utf8encode(this.recordToJSON(&#x27;update&#x27;, false)));

            return new Promise((resolve, reject) &#x3D;&gt; {
                const me &#x3D; this;
                this.fourD.call4DRESTMethod(&#x27;REST_PostData&#x27;, body)
                    .subscribe(resultJSON &#x3D;&gt; {
                        if (resultJSON.returnCode &#x3D;&#x3D;&#x3D; &#x27;OK&#x27;) {
                            // update record went OK
                            me.clearRecordDirtyFlag(); // clean up modified fields
                            resolve(&lt;any&gt;me);
                        } else { reject(resultJSON.returnCode); }
                    },
                        error &#x3D;&gt; {
                            console.log(&#x27;error:&#x27; + JSON.stringify(error));
                            reject(error);
                        });
            });


        } else {
            return new Promise((resolve, reject) &#x3D;&gt; {
                reject(&#x27;No current record number set!&#x27;);
            });
        }
    }

    /**
     * Delete record from the database
     *
     * @param cascade true|false indicates if 4D should perform a cascade delete (optional, default&#x3D;false)
     *
     * @returns returns a Promise for the database operation, whose result is the FourDModel instance
     *
     */
    public deleteRecord(cascade: boolean &#x3D; false): Promise&lt;string&gt; {
        if (this.recordNumber &gt;&#x3D; 0) {
            const body: any &#x3D; { Username: FourDInterface.currentUser };
            body.TableName &#x3D; this.tableName;
            body.RecordNum &#x3D; this.recordNumber;
            if (this.fourdDeleteCallbackMethod_) { body.CallBackMethod &#x3D; this.fourdDeleteCallbackMethod_; }
            body.Action &#x3D; &#x27;delete&#x27;;
            if (cascade) { body.cascadeDelete &#x3D; cascade; }

            return new Promise((resolve, reject) &#x3D;&gt; {
                const me &#x3D; this;
                this.fourD.call4DRESTMethod(&#x27;REST_PostData&#x27;, body)
                    .subscribe(resultJSON &#x3D;&gt; {
                        if (resultJSON.returnCode &#x3D;&#x3D;&#x3D; &#x27;OK&#x27;) {
                            // delete record went OK
                            resolve(&lt;any&gt;me);
                        } else { reject(resultJSON.returnCode); }
                    },
                        error &#x3D;&gt; {
                            console.log(&#x27;error:&#x27; + JSON.stringify(error));
                            reject(error);
                        });
            });



        } else {
            return new Promise((resolve, reject) &#x3D;&gt; {
                reject(&#x27;No current record number set, and no query specified!&#x27;);
            });
        }

    }

    /**
     * Populates model with attributes/properties from a json Object
     *
     *  @param recordData json object whose properties will be used to populate the Data Model
     */
    public populateModelData(recordData: Object) {
        if (recordData.hasOwnProperty(&#x27;_recnum&#x27;)) { this.recordNumber &#x3D; recordData[&#x27;_recnum&#x27;]; }
        for (const field in recordData) {
            if (field !&#x3D;&#x3D; &#x27;_recnum&#x27; &amp;&amp; this.getFieldProperties(field)) {
                switch (this.getFieldProperties(field).type ) {
                    case &#x27;json&#x27;:
                        this[field] &#x3D; JSON.parse(recordData[field]); 
                        break;
                
                    default:
                        this[field] &#x3D; recordData[field];
                        break;
                }
            }
        }

    }

    public extractModelData(): Object {
        let data &#x3D; { _recnum: this._recnum };
        for (const field of this.fields) {
            data[field.name] &#x3D; this[field.name];
        }

        return data;
    }

    /**
     * Retrieves a list of records using a query string
     *
     *  @param query the FourDQuery object that defines the query to be used for retrieving from 4D
     * 	@param columns custom column list to retrieve, JSON array of the columns to retrieve. &lt;p&gt;if informed, only the columns listed will be retrieved instead of the whole record&lt;/p&gt;
     * 	@param startRec the starting record number to retrieve, used for paging.
     * 	@param numOfRecords the number of records to retrieve, the default -1 will retrieve all records in the resulting query.
     *  @param filter optional, FourDQuery to further filter records to he retrieved
     *  @param orderby optional order By clause to retrieve records in a set order. &lt;p&gt; in the format:&lt;/p&gt;&lt;p&gt;    &amp;gt;table.field : to sort records by table.field in ascending order&lt;/p&gt;&lt;p&gt;    &amp;lt;table.field : to sort records by table.field in descending order&lt;/p&gt;
     *
     *
     * @returns returns a Promise for the database operation, whose result is a FourDCollection with the query results
     */
    public getRecords(query: FourDQuery &#x3D; null,
        columns: Array&lt;string&gt; &#x3D; null,
        startRec: number &#x3D; 0, numOfRecords: number &#x3D; -1,
        filter: string &#x3D; null,
        orderby: string &#x3D; null): Promise&lt;FourDCollection&gt; {
        const theModel: any &#x3D; this.constructor.valueOf();
        const records: FourDCollection &#x3D; new FourDCollection();
        records.model &#x3D; theModel;
        return new Promise((resolve, reject) &#x3D;&gt; {
            records.getRecords(query, (columns) ? columns : this.getColumnList(), startRec, numOfRecords, filter, orderby)
                .then((reclist) &#x3D;&gt; { resolve(records); })
                .catch((error) &#x3D;&gt; { reject(error); });
        });

    }

    /**
     * Retrieves a set of variables or 4D execute formula values
     * 
     * @param values an Array of objects with the following format: {formula: &#x27;a 4d formula&#x27;, value:&#x27;the resulting value returned by 4D&#x27;}
     * @param method the name of a 4D method to be called before processing the formulas
     *
     * @returns returns a Promise for the database operation, whose result is the values Array populated by 4D
     */
    public getValuesFrom4D(values: Array&lt;any&gt;, method: string &#x3D; &#x27;&#x27;): Promise&lt;Array&lt;any&gt;&gt; {
        const body: any &#x3D; { VariablesList: Base64.encode(Utf8.utf8encode(JSON.stringify(values))) };
        if (method &amp;&amp; method !&#x3D; &#x27;&#x27;) {
            body.CallbackMethod &#x3D; method;
        }
        return new Promise((resolve, reject) &#x3D;&gt; {
            // const me &#x3D; this;
            this.fourD.call4DRESTMethod(&#x27;REST_GetValues&#x27;, body)
                .subscribe(result &#x3D;&gt; {
                    resolve(result);
                },
                    error &#x3D;&gt; {
                        console.log(&#x27;error:&#x27; + JSON.stringify(error));
                        reject(error);
                    });
        });

    }
    /**
     * Get the current record&#x27;s record number
     * 
     *  @returns current record number (4D&#x27;s record number, equivalent to ROWID)
     *
     */
    public get recordNumber(): number {
        return this._recnum;
    }
    public set recordNumber(v: number) { this._recnum &#x3D; v; }

    /**
     * Checks to see if a record is currently loaded
     *
     * @returns true if a record is loaded into this FourDModel instance
     *
     */
    public isRecordLoaded(): boolean {
        return (this.recordNumber &gt;&#x3D; 0);
    }


    /**
     * Clears record modified flag.
     * 
     * This can be used when one changes a record programmatically, but does not want to set the record modified flag.
     * For example on record initialization.
     *
     */
    public clearRecordDirtyFlag() {
        this._modified &#x3D; {};					// clear modified fields list
    }


    /**
     * Check if current record has been modified.
     *
     * @returns true indicates that record contents have been modified.
     *
     */
    public recordIsDirty(): boolean {
        for (const field of this.fields) {
            if (this._modified.hasOwnProperty(field.name)) { return true; }
        }
        return false;
    }


    /**
     * Prepares the record&#x27;s JSON field description to send to 4D
     * 
     * @returns JSON string representing all fields in the Data Model
     */
    public getColumnListJSON(): string {
        const colList: Array&lt;Object&gt; &#x3D; [];
        const fields: Array&lt;IFieldDescription&gt; &#x3D; this.fields;
        for (const col of fields) {
            if (col.formula) {
                colList.push({ name: col.name, formula: col.formula });
            } else if (col.subTable) {
                const subFields: Array&lt;Object&gt; &#x3D; [];
                for (const sub of col.subTable.fields) {
                    subFields.push({ name: sub.name, field: sub.longname });
                };
                colList.push({
                    name: col.name,
                    subTable: col.subTable.tableName,
                    joinFK: col.joinFK,
                    joinPK: col.joinPK,
                    subFields: subFields
                });

            } else if (col.longname) { colList.push({ name: col.name, field: col.longname }); }
        }

        return JSON.stringify(colList);

    }

    /**
     * Gets a list of fields in the Data Model
     * 
     * @param includeSubTables if &#x27;true&#x27;, includes fields in subtables defined in the Data Model
     * 
     * @returns an array with all fields defined for this data model
     */
    public getColumnList(includeSubTables: boolean &#x3D; false): Array&lt;any&gt; {
        const cols: Array&lt;any&gt; &#x3D; [];
        const fields: Array&lt;IFieldDescription&gt; &#x3D; this.fields;
        for (const col of fields) {
            if (!this.isSubtable(col) || includeSubTables) {
                if (col.formula) {
                    cols.push(col);
                } else { cols.push(col.name); }
            }
        };
        return cols;
    }

    /**
     * Returns a field&#x27;s longname, given its field name
     * 
     * @param fieldName the field name
     * 
     * @returns the field dot longname, as &#x27;table.field&#x27;
     */
    public getLongname(fieldName: string): string {
        for (const field of this.fields) {
            if (field.name &#x3D;&#x3D;&#x3D; fieldName) { return field.longname; }
        }

        // not found, assume table.field
        return this.tableName + &#x27;.&#x27; + fieldName;
    }

    // -----------------------
    // Private methods
    // -----------------------

    /**
     * Returns a field&#x27;s data model description
     * 
     * @param fieldName the field name
     * 
     * @returns the field&#x27;s iFieldDescription
     */
    private getFieldDescription(fieldName: string): IFieldDescription {
        for (const field of this.fields) {
            if (field.name &#x3D;&#x3D;&#x3D; fieldName) { return field; }
        }

        return null;
    }

    /**
     * Checks to see if a field is from a related table
     *
     * @param field field description for the Class definition
     * @return true if field is on a related table
     *
     */
    private isRelatedField(field: IFieldDescription): boolean {
        return field.isrelated;
    }

    /**
     * Checks to see if a field contents have been modified
     *
     * @param field field/property name
     * @returns true if field has been modified
     *
     */
    private isModifiedField(field: string): boolean {
        return this._modified.hasOwnProperty(field);
    }

    /**
     * Checks to see if a field is a calculated field
     *
     * @param field field description from the Data Model
     * 
     * @returns true if field is formula, a calculated field
     *
     */
    private isCalculatedField(field: IFieldDescription): boolean {
        return (field.formula !&#x3D;&#x3D; undefined);
    }

    /**
     * Checks to see if a field is a related many subtable
     *
     * @param field field description from the Data Model
     * @returna true if field is a related many subtable
     *
     */
    private isSubtable(field: IFieldDescription): boolean {
        return (field.subTable !&#x3D;&#x3D; undefined);
    }

    /**
     * Checks to see if a field is read only
     *
     * @param field field description from the Data Model
     * @returns true if field is read only
     *
     */
    private isReadOnly(field: IFieldDescription): boolean {
        return field.readonly;
    }



}

</code></pre>
    </div>
</div>




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script>var COMPODOC_CURRENT_PAGE_DEPTH = 1;</script>

       <script src="../js/search/search.js"></script>
       <script src="../js/search/lunr.min.js"></script>
       <script src="../js/search/search-lunr.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
       <script src="../js/search/search_index.js"></script>

    </body>
</html>
